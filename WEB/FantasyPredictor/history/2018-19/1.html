<!DOCTYPE html>
<body onload="loadFunction()">


  <body>


    <h1 id="gameweek"></h1>

    <h2 id="prediction"></h2>

    <p id ="goalkeeper"></p>
    <p id ="defender"></p>
    <p id ="midfielder"></p>
    <p id ="forward"></p>


    <script type="text/javascript">
      function loadFunction(){

        var url = window.location.pathname;
        var filename = url.substring(url.lastIndexOf('/')+1);
        filename = filename.substring(0, filename.lastIndexOf('.'))

        document.getElementById("gameweek").innerHTML = "Gameweek "+filename;

        document.getElementById("goalkeeper").innerHTML = getPrediction(filename);


      }

      async function getPrediction(gameweek){

        const userAction = async () => {
          const response = await fetch('http://localhost:5000/predict/'+gameweek, {
            method: 'GET',
            //body: myBody, // string or object
            headers: {
              'Content-Type': 'application/json',
              'Access-Control-Allow-Origin':'*'
            }
          });
          console.log("Awaitng response")
          const myJson = await response.json(); //extract JSON from the http response
          console.log(myJson)

          return myJson
          // do something with myJson
        }
        userAction()
        console.log("at the end??")
      }
    </script>
</body>
</body>
